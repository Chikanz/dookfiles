#!/usr/bin/env bash
set -e
set -u
set -o pipefail

if [ $# -lt 2 ] || [ $# -gt 3 ]; then
	echo "Usage: push <local-directory> <user@host> [remote-path]" >&2
	echo "Uploads from local to remote directory" >&2
	echo "Default remote path is ~/ if not specified" >&2
	exit 1
fi

local_dir="$1"
ssh_server="$2"
remote_path="${3:-~/}"

exec scp -r "${local_dir}" "${ssh_server}:${remote_path}"
